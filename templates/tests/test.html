{% extends 'base.html' %}

{% block content %}
{% for a in aswers %}
    <h1 class="header">{{a.question.title|striptags}}</h1>
    {% for choice in a.question.choice_set.all %}
        <input class='radio' data-answer={{a.id}} type="radio" name="aswer-{{a.id}}" id="choice-{{choice.id}}" value={{choice.id}}>
        <label for="choice-{{choice.id}}">{{choice.title|striptags}}</label>
        <br>
    {% endfor %}

{% endfor %}
<a href="{% url 'tests:submit_test' %}?at_id={{attempt.id}}" class="button is-success">Submit</a>
<script>
$(document).ready(function(){
    $(".radio").click(function(){
        console.log($(this).val())
        axios.get(`{% url 'tests:submit_answer' %}?ch_id=${$(this).val()}&an_id=${$(this)[0].dataset.answer}`)
        .then(function (response) {
            console.log(response);
        })
        .catch(function (error) {
            // handle error
            console.log(error);
        })
    })
});
   
</script>
{% endblock content %}

